#!/usr/bin/env bash
# if in workspace 0
if (("$(getcurrentws)" != 0)); then
	swaymsg workspace 0
	move=1
fi

# if there is a window selected
if (("$(
	swaymsg -t get_workspaces \
	| jq '.[] | select(.num == 0).focus | length'
)" > 0)); then
	# switch workspaces
	((move)) || swaymsg workspace back_and_forth
else
	# no window found: launch terminal
	# shellcheck disable=SC2016
	swaymsg exec '$term' "tmux new-session -A -s 0"
fi
