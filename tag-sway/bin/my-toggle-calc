#!/usr/bin/env bash
title="dropdown-calc"

json="$(swaymsg -t get_tree | jq '.. | select(.app_id? == "'"$title"'")')"

if [ -z "$json" ]; then
	swaymsg "exec \$term -a $title qalc"
else
	if [ "$(jq '.visible' <<< "$json")" == "true" ]; then
		swaymsg '[app_id="'"$title"'"] move window to scratchpad'
	else
		swaymsg '[app_id="'"$title"'"] move window to workspace current'
		swaymsg '[app_id="'"$title"'"] focus'
	fi
fi
